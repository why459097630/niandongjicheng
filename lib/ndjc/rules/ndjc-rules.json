{
  "global": {
    "forbidAngles": true,
    "forbidPlaceholders": true
  },

  "text": {
    "NDJC:PACKAGE_NAME": { "regex": "^[a-z][a-z0-9_]*(\\.[a-z][a-z0-9_]*)+$" },
    "NDJC:APP_LABEL":   { "minLen": 1 },
    "NDJC:HOME_TITLE":  { "minLen": 1 },
    "NDJC:PRIMARY_BUTTON_TEXT": { "minLen": 1 },

    "THEME_COLORS": {
      "regex": "^\\{\\\"primary\\\":\\\"#[0-9A-Fa-f]{6}\\\",\\\"secondary\\\":\\\"#[0-9A-Fa-f]{6}\\\"\\}$"
    },

    /* 允许为空字符串，用于追加小量配置；为避免被全局规则误删，这里声明允许绕过 */
    "TYPOCASE_OVERRIDES": {
      "minLen": 0,
      "allowAngles": true,
      "allowPlaceholders": true
    },
    "STRINGS_EXTRA": {
      "minLen": 0,
      "allowAngles": true,
      "allowPlaceholders": true
    },

    /* 路由名仅允许小写 slug；与 LIST:ROUTES 对应 */
    "ROUTE_HOME":   { "regex": "^[a-z][a-z0-9_-]*$" },
    "ROUTE_DETAIL": { "regex": "^[a-z][a-z0-9_-]*$" }
  },

  "block": {
    "HOME_HEADER":  { "minLen": 30 },
    "HOME_BODY":    { "minLen": 30 },
    "HOME_ACTIONS": { "minLen": 30 },
    "SPLASH_CONTENT": { "minLen": 30 },
    "EMPTY_STATE":  { "minLen": 30 },
    "ERROR_STATE":  { "minLen": 30 },
    "DEBUG_PANEL":  { "minLen": 30 },
    "HEADER_AD_SLOT": { "minLen": 10 },
    "USER_PROFILE_CARD": { "minLen": 30 },
    "SPONSORED_CARD": { "minLen": 30 },
    "PROFILE_SECTION": { "minLen": 30 },
    "SETTINGS_SECTION": { "minLen": 30 },
    "SETTINGS_SECTION:EXTRA": { "minLen": 30 }
  },

  "list": {
    "ROUTES": { "minItems": 1, "itemRegex": "^[a-z0-9_-]{1,62}$" },
    "DEPENDENCY_SNIPPETS": { "minItems": 0, "itemRegex": "^.+$" },
    "PROGUARD_EXTRA": { "minItems": 0, "itemRegex": "^.+$" },
    "PACKAGING_RULES": { "minItems": 0, "itemRegex": "^.+$" },
    "POST_FIELDS": { "minItems": 0, "itemRegex": "^.+$" },
    "PLURAL_STRINGS": { "minItems": 0, "itemRegex": "^.+$" },
    "COMPONENT_STYLES": { "minItems": 0, "itemRegex": "^.+$" },
    "DEEPLINK_PATTERNS": { "minItems": 0, "itemRegex": "^https?://.+" },
    "NETWORK_CLEAR_TEXT": { "minItems": 0, "itemRegex": "^[a-z0-9.-]+$" },
    "RES_CONFIGS_OVERRIDE": { "minItems": 0, "itemRegex": "^[a-z]{2}(-r[A-Z]{2})?$" }
  },

  "gradle": {
    "applicationId": { "regex": "^[a-z][a-z0-9_]*(\\.[a-z][a-z0-9_]*)+$" },
    "resConfigs": { "minItems": 1, "itemRegex": "^[A-Za-z]{2}(?:-r[A-Z]{2})?$" },
    "permissions": { "minItems": 1, "itemRegex": "^android\\.permission\\.[A-Z_]+$" }
  },

  "fixes": {
    /* 包名非法时回退到 applicationId（原有逻辑） */
    "onInvalidPackageUseApplicationId": true,

    /* 1) 主题色规范化：#RGB/#RRGGBBAA/命名色 → #RRGGBB；只保留 primary/secondary；缺失用默认填充；最后序列化为单行 JSON 字符串 */
    "normalizeThemeColors": {
      "targets": ["THEME_COLORS"],
      "default": { "primary": "#7C3AED", "secondary": "#10B981" }
    },

    /* 2) 额外文本安全化：含 < > ${} %s 等时置空；对象/数组则紧凑 JSON 字符串化；可控的最大长度 */
    "sanitizeTextExtras": {
      "targets": ["TYPOCASE_OVERRIDES", "STRINGS_EXTRA"],
      "emptyOnForbidden": true,
      "stringifyObjects": true,
      "maxLen": 4096
    },

    /* 3) 路由名 slug 化：去除 /、{}、空白等；转为小写，仅留 [a-z0-9_-]；空或非法时使用回退值 */
    "slugifyRoutes": {
      "targets": ["ROUTE_HOME", "ROUTE_DETAIL"],
      "fallbacks": { "ROUTE_HOME": "home", "ROUTE_DETAIL": "detail" }
    },

    /* 4) 当提供了 LIST:ROUTES 时，从列表推断 text 路由；优先 detail/home 等关键名，否则取第 1/第 2 个 */
    "inferRoutesFromList": {
      "source": "ROUTES",
      "prefer": { "ROUTE_HOME": ["home", "index", "main"], "ROUTE_DETAIL": ["detail", "post", "item"] },
      "fallbacks": { "ROUTE_HOME": "home", "ROUTE_DETAIL": "detail" }
    }
  }
}
