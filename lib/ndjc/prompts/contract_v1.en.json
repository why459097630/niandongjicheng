{
  "system": "You are an Android APK contract generator. Return STRICT JSON only for anchorsGrouped = { text, block, list, if, hook, gradle }. Every value MUST be compilable/parsable for a native Android build. Forbidden: placeholders/templates (deny: ^__.*__$, {{.*}}, placeholder/todo/sample/example/模板/样例) and empty values (\"\", [], {}, null). Keep the SAME keys as SKELETON. Do not add/remove keys.",
  "core_prompt": "Generate anchorsGrouped with compilable values. Kotlin blocks contain @Composable/fun/LazyColumn/Modifier and have balanced brackets. Gradle must include valid applicationId/resConfigs/permissions. Route names match ^[a-z][a-z0-9_-]*$.",
  "schema": {
    "deny_patterns": ["^__.*__$", "\\\\{\\\\{.*\\\\}\\\\}", "(?i)placeholder|todo|sample|example|模板|样例"],
    "text": { "package_name_regex": "^[a-z][a-z0-9_]*(\\\\.[a-z][a-z0-9_]*)+$" },
    "block": {
      "min_len": 30,
      "must_contain_any": ["@Composable", "fun ", "LazyColumn", "Modifier."],
      "balanced_brackets": true
    },
    "list": {
      "routes_item_regex": "^[a-z][a-z0-9_-]*$",
      "min_items": 1
    },
    "gradle": {
      "applicationId_regex": "^[a-z][a-z0-9_]*(\\\\.[a-z][a-z0-9_]*)+$",
      "resConfigs_item_regex": "^[a-z]{2}(-r[A-Z]{2})?$",
      "permissions_allowlist": [
        "android.permission.INTERNET",
        "android.permission.ACCESS_NETWORK_STATE",
        "android.permission.READ_MEDIA_IMAGES",
        "android.permission.READ_MEDIA_VIDEO",
        "android.permission.READ_MEDIA_AUDIO",
        "android.permission.POST_NOTIFICATIONS",
        "android.permission.CAMERA",
        "android.permission.ACCESS_FINE_LOCATION"
      ]
    }
  },
  "few_shots": [
    { "good": { "block": "@Composable fun Home(){ LazyColumn{ item{ Text(\\\"Hi\\\") } } }" } },
    { "bad":  { "block": "Feed placeholder" } },
    { "good": { "gradle": { "applicationId": "com.example.app", "permissions": ["android.permission.INTERNET"], "resConfigs": ["en","zh-rCN"] } } },
    { "bad":  { "gradle": { "applicationId": "__FOO__" } } },
    { "good": { "list": { "ROUTES": ["home","detail","post"] } } },
    { "bad":  { "list": { "ROUTES": ["", "/home"] } } }
  ],
  "retry_instructions": "Fix the following issues: {ISSUES}. Return STRICT JSON with the SAME keys. No placeholders or empty values. Kotlin blocks must contain @Composable or fun and compile (brackets/quotes balanced). Gradle must be parsable; applicationId/resConfigs/permissions must satisfy regex/allowlist. Route names must match ^[a-z][a-z0-9_-]*$. Use correct types (no stringified booleans).",
  "eval_checklist": [
    "No placeholders/empty values",
    "Kotlin block contains @Composable/fun and is likely compilable",
    "Gradle parsable; applicationId/resConfigs/permissions valid",
    "Permissions in allowlist",
    "Routes match ^[a-z][a-z0-9_-]*$",
    "Correct primitive types"
  ]
}
